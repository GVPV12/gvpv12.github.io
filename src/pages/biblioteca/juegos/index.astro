---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import { Image } from 'astro:assets';

const images = import.meta.glob<{ default: ImageMetadata }>(
  '/src/assets/img/juegos/*.{jpg,jpeg,png,webp}',
  { eager: true }
);

function getImage(file: string): ImageMetadata | null {
  const key = Object.keys(images).find((k) => k.includes(`/${file}.`));
  return key ? images[key].default : null;
}

const juegos = [
{ title: 'Gris',                          file: 'gris',            url: 'https://store.steampowered.com/app/683320/GRIS/' },
{ title: 'Spyro Reignited Trilogy',       file: 'spyro',           url: 'https://store.steampowered.com/app/996580/Spyro_Reignited_Trilogy/' },
{ title: 'Stardew Valley',                file: 'stardew',         url: 'https://store.steampowered.com/app/413150/Stardew_Valley/' },
{ title: 'Crash Bandicoot N. Sane Trilogy', file: 'crash',         url: 'https://store.steampowered.com/app/731490/Crash_Bandicoot_N_Sane_Trilogy/' },
{ title: 'Sky children of light',              file: 'sky',            url: 'https://store.steampowered.com/app/2325290/Sky_Nios_de_la_Luz/' },
{ title: 'River City Girls',            file: 'rcg1',            url: 'https://store.steampowered.com/app/1049320/River_City_Girls/' },
{ title: 'River City Girls 2',            file: 'rcg2',            url: 'https://store.steampowered.com/app/1920480/River_City_Girls_2/' },
{ title: 'Neva',                          file: 'neva',            url: 'https://store.steampowered.com/app/2420660/Neva/' },
{ title: 'La Leyenda de Korra',           file: 'leyendadekorra' },
{ title: 'Child of Light',                file: 'childoflight',    url: 'https://store.steampowered.com/app/256290/Child_of_Light/' },
{ title: 'A Space for the Unbound',       file: 'spaceforthe',     url: 'https://store.steampowered.com/app/1201270/A_Space_for_the_Unbound/' },
{ title: 'Ori and the Blind Forest',      file: 'ori',             url: 'https://store.steampowered.com/app/261570/Ori_and_the_Blind_Forest/' },
{ title: 'Our Life: Beginnings & Always', file: 'ourlife',         url: 'https://store.steampowered.com/app/1129190/Our_Life_Beginnings__Always/' },
{ title: 'Paladins',                      file: 'paladins',        url: 'https://store.steampowered.com/app/444090/Paladins/' },
{ title: 'The Last Campfire',             file: 'thelastcampfire', url: 'https://store.steampowered.com/app/990630/The_Last_Campfire/' },
{ title: 'Missed Messages',               file: 'missedmessages',  url: 'https://store.steampowered.com/app/812810/missed_messages/' },
{ title: "There's This Girl",             file: 'theresthisgirl',  url: 'https://play.google.com/store/apps/details?id=com.AngelaHe.TheresThisGirl&pcampaignid=web_share/' },

];

const juegosConImagen = juegos.map((j) => ({ ...j, cover: getImage(j.file) }));
---

<BaseLayout
  title="Videojuegos"
  description="Mis videojuegos favoritos y recomendaciones"
>
  <div class="container">
    <main>
      <h1 class="text-3xl font-bold mb-2">Videojuegos</h1>
      <p class="text-zinc-700 dark:text-zinc-300 text-sm mb-10">
        Una colecci√≥n de mis videojuegos favoritos que recomiendo totalmente.
      </p>

      <div class="games-grid">
        {juegosConImagen.map((juego) =>
          juego.cover
            ? <a href={juego.url} target="_blank" rel="noopener noreferrer" class="game-cover" title={juego.title}>
                <Image src={juego.cover} alt={juego.title} width={200} height={280} loading="lazy" />
              </a>
            : null
        )}
      </div>
    </main>
  </div>
</BaseLayout>

<style>
  .container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 1.5rem;
  }

  .games-grid {
    display: grid;
    grid-template-columns: repeat(8, 1fr);
    gap: 1rem;
  }

  .game-cover {
    position: relative;
    width: 100%;
    padding-bottom: 140%;
    overflow: hidden;
    border-radius: 0.375rem;
    background-color: #f0f0f0;
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    display: block;
  }

  :global(.dark) .game-cover {
    background-color: #2a2a2a;
  }

  .game-cover:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.3);
  }

  .game-cover :global(img) {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
  }

  @media (max-width: 1400px) {
    .games-grid { grid-template-columns: repeat(6, 1fr); }
  }

  @media (max-width: 1024px) {
    .games-grid { grid-template-columns: repeat(5, 1fr); }
  }

  @media (max-width: 768px) {
    .games-grid { grid-template-columns: repeat(4, 1fr); gap: 0.75rem; }
  }

  @media (max-width: 480px) {
    .games-grid { grid-template-columns: repeat(3, 1fr); gap: 0.5rem; }
  }
</style>